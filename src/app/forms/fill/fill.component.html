<div class="container mt-4">
  <h3 class="mb-4">Fill Form</h3>

  <form [formGroup]="fillForm" (ngSubmit)="onSubmit()">
    <ng-container *ngFor="let f of formFields">
      <div class="mb-3">
        <label>{{ f.label }} <span *ngIf="f.required">*</span></label>
        <small class="text-muted d-block">{{ f.helpText }}</small>

        <ng-container [ngSwitch]="f.type">
          <input
            *ngSwitchCase="'text'"
            class="form-control"
            [formControlName]="f.name"
          />
          <textarea
            *ngSwitchCase="'textarea'"
            class="form-control"
            [formControlName]="f.name"
          ></textarea>
          <input
            *ngSwitchCase="'date'"
            type="date"
            class="form-control"
            [formControlName]="f.name"
          />
          <select
            *ngSwitchCase="'dropdown'"
            class="form-control"
            [formControlName]="f.name"
          >
            <option *ngFor="let opt of f.options" [value]="opt">{{ opt }}</option>
          </select>
          <div *ngSwitchCase="'radio'">
            <div *ngFor="let opt of f.options" class="form-check">
              <input
                type="radio"
                class="form-check-input"
                [value]="opt"
                [formControlName]="f.name"
              />
              <label class="form-check-label">{{ opt }}</label>
            </div>
          </div>
          <div *ngSwitchCase="'checkbox'">
            <div *ngFor="let opt of f.options" class="form-check">
              <input
                type="checkbox"
                class="form-check-input"
                [checked]="isChecked(f.name, opt)"
                (change)="toggleCheckbox(f.name, opt)"
              />
              <label class="form-check-label">{{ opt }}</label>
            </div>
          </div>
        </ng-container>

        <div
          *ngIf="fillForm.get(f.name)?.invalid && fillForm.get(f.name)?.touched"
          class="text-danger mt-1"
        >
          Field is required.
        </div>
      </div>
    </ng-container>

    <button class="btn btn-primary" [disabled]="fillForm.invalid">Submit</button>
    <div *ngIf="submitted" class="alert alert-success mt-3">
      Form submitted successfully!
    </div>
  </form>
</div>
